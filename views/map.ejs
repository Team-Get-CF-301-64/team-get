<html>
  <head>
    <script src="https://api.mqcdn.com/sdk/mapquest-js/v1.3.2/mapquest.js"></script>
    <link type="text/css" rel="stylesheet" href="https://api.mqcdn.com/sdk/mapquest-js/v1.3.2/mapquest.css"/>

    <script type="text/javascript">
      window.onload = function() {
        L.mapquest.key = '<%= MAPQUEST_API_KEY %>';

        let map = L.mapquest.map('map', {
          center: [39.8283, -98.5795],
          layers: L.mapquest.tileLayer('dark'),
          zoom: 4
        });

        let directions = L.mapquest.directions();
        directions.setLayerOptions({
          routeRibbon: {
            draggable: false,
            showTraffic: false
          },
          startMarker: {
            draggable: false
          },
          endMarker: {
            draggable: false
          },
          waypointsMarker:{
            draggable: false
          }
        });

        let waypoints = <%- JSON.stringify(destinations.waypoints) %> 

        directions.route({
          start: '<%= destinations.start %>',
          end: '<%= destinations.end %>',
          waypoints: waypoints
        });

      }
    </script>
  </head>

  <body style="border: 0; margin: 0;">
    <div id="map" style="width: 100%; height: 530px;"></div>
  </body>
</html>